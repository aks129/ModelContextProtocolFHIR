{
  "$schema": "https://registry.modelcontextprotocol.io/schemas/server.json",
  "name": "fhir-mcp-guardrails",
  "display_name": "FHIR R6 Agent Context Server",
  "description": "R6-only FHIR server with agent-first MCP orchestration. Provides bounded context envelopes, PHI redaction, step-up authorization, and SMART-on-FHIR scopes for clinical AI agents.",
  "version": "0.9.0",
  "protocol_version": "2024-11-05",
  "repository": {
    "type": "git",
    "url": "https://github.com/aks129/fhir-mcp-guardrails"
  },
  "authors": [
    {
      "name": "FHIR IQ / Eugene Vestel",
      "url": "https://www.fhiriq.com"
    }
  ],
  "license": "Apache-2.0",
  "categories": ["healthcare", "fhir", "interoperability", "clinical"],
  "tags": [
    "fhir",
    "fhir-r6",
    "hl7",
    "healthcare",
    "mcp",
    "agent",
    "context-envelope",
    "phi-redaction",
    "hipaa",
    "clinical-ai"
  ],
  "transports": [
    {
      "type": "streamable-http",
      "url": "/mcp"
    },
    {
      "type": "sse",
      "url": "/sse"
    }
  ],
  "authentication": {
    "type": "oauth2",
    "flows": {
      "authorizationCode": {
        "authorizationUrl": "/oauth/authorize",
        "tokenUrl": "/oauth/token",
        "scopes": {
          "fhir.read": "Read FHIR resources (redacted)",
          "fhir.write": "Create and update FHIR resources (requires step-up)",
          "context.read": "Read pre-built context envelopes",
          "context.write": "Ingest bundles and create context envelopes",
          "audit.read": "Read audit event records",
          "smart/patient/*.read": "SMART-on-FHIR patient-level read",
          "smart/patient/*.write": "SMART-on-FHIR patient-level write"
        }
      }
    }
  },
  "tools": [
    {
      "name": "context.get",
      "description": "Retrieve a pre-built context envelope with patient-centric FHIR resources",
      "annotations": {
        "readOnlyHint": true,
        "destructiveHint": false,
        "openWorldHint": false
      }
    },
    {
      "name": "fhir.read",
      "description": "Read a specific FHIR R6 resource by type and ID (redacted)",
      "annotations": {
        "readOnlyHint": true,
        "destructiveHint": false,
        "openWorldHint": false
      }
    },
    {
      "name": "fhir.search",
      "description": "Search for FHIR R6 resources with basic filtering parameters",
      "annotations": {
        "readOnlyHint": true,
        "destructiveHint": false,
        "openWorldHint": false
      }
    },
    {
      "name": "fhir.validate",
      "description": "Validate a proposed FHIR R6 resource against structural rules",
      "annotations": {
        "readOnlyHint": true,
        "destructiveHint": false,
        "openWorldHint": false
      }
    },
    {
      "name": "fhir.propose_write",
      "description": "Propose a write - validates the resource and returns a preview without committing",
      "annotations": {
        "readOnlyHint": true,
        "destructiveHint": false,
        "openWorldHint": false
      }
    },
    {
      "name": "fhir.commit_write",
      "description": "Commit a previously proposed write. Requires step-up authorization token.",
      "annotations": {
        "readOnlyHint": false,
        "destructiveHint": true,
        "openWorldHint": false
      }
    }
  ],
  "resources": [],
  "deployment": {
    "docker": {
      "image": "ghcr.io/aks129/fhir-mcp-guardrails:latest",
      "compose_file": "docker-compose.yml"
    },
    "environment": {
      "FHIR_BASE_URL": {
        "description": "Backend FHIR R6 REST facade URL",
        "default": "http://localhost:5000/r6/fhir"
      },
      "STEP_UP_SECRET": {
        "description": "HMAC-SHA256 secret for step-up token signing",
        "required": true
      },
      "OAUTH_ISSUER": {
        "description": "OAuth 2.1 issuer URL for token verification",
        "required": false
      },
      "MCP_PORT": {
        "description": "Port for MCP server",
        "default": "3001"
      }
    }
  }
}
